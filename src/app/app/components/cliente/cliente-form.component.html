<div class="form-container">
  <!-- Header -->
  <div class="form-header">
    <div class="header-content">
      <button class="btn-back" (click)="volver()">
        <i class="icon-back">←</i>
      </button>
      <div>
        <h1 class="titulo">{{ esEdicion ? 'Editar Cliente' : 'Nuevo Cliente' }}</h1>
        <p class="subtitulo">{{ esEdicion ? 'Actualiza la información del cliente' : 'Completa los datos del nuevo cliente' }}</p>
      </div>
    </div>
  </div>

  <!-- Mensaje de error -->
  <div class="alert alert-error" *ngIf="mensajeError">
    <span class="alert-icon">⚠️</span>
    {{ mensajeError }}
  </div>

  <!-- Mensaje de éxito -->
  <div class="alert alert-success" *ngIf="mensajeExito">
    <span class="alert-icon">✓</span>
    {{ mensajeExito }}
  </div>

  <!-- Loading -->
  <div class="loading-overlay" *ngIf="cargando">
    <div class="spinner"></div>
  </div>

  <!-- Formulario -->
  <form [formGroup]="clienteForm" (ngSubmit)="guardarCliente()" class="form-card">
    <div class="form-section">
      <h3 class="section-title">Información Personal</h3>
      
      <div class="form-row">
        <div class="form-group">
          <label for="cedula" class="form-label">
            Cédula <span class="required">*</span>
          </label>
          <input
            id="cedula"
            type="text"
            formControlName="cedula"
            class="form-input"
            [class.input-error]="cedula?.invalid && (cedula?.dirty || cedula?.touched)"
            [readonly]="esEdicion"
            placeholder="Ingrese la cédula"
          >
          <div class="error-message" *ngIf="cedula?.invalid && (cedula?.dirty || cedula?.touched)">
            <span *ngIf="cedula?.errors?.['required']">La cédula es requerida</span>
            <span *ngIf="cedula?.errors?.['pattern']">La cédula solo debe contener números</span>
            <span *ngIf="cedula?.errors?.['minlength']">La cédula debe tener al menos 9 caracteres</span>
          </div>
        </div>

        <div class="form-group">
          <label for="nombreCompleto" class="form-label">
            Nombre Completo <span class="required">*</span>
          </label>
          <input
            id="nombreCompleto"
            type="text"
            formControlName="nombreCompleto"
            class="form-input"
            [class.input-error]="nombreCompleto?.invalid && (nombreCompleto?.dirty || nombreCompleto?.touched)"
            placeholder="Ingrese el nombre completo"
          >
          <div class="error-message" *ngIf="nombreCompleto?.invalid && (nombreCompleto?.dirty || nombreCompleto?.touched)">
            <span *ngIf="nombreCompleto?.errors?.['required']">El nombre es requerido</span>
            <span *ngIf="nombreCompleto?.errors?.['minlength']">El nombre debe tener al menos 3 caracteres</span>
          </div>
        </div>
      </div>
    </div>

    <div class="form-section">
      <h3 class="section-title">Información de Contacto</h3>
      
      <div class="form-row">
        <div class="form-group">
          <label for="telefono" class="form-label">
            Teléfono <span class="required">*</span>
          </label>
          <input
            id="telefono"
            type="text"
            formControlName="telefono"
            class="form-input"
            [class.input-error]="telefono?.invalid && (telefono?.dirty || telefono?.touched)"
            placeholder="Ej: 8888-8888"
          >
          <div class="error-message" *ngIf="telefono?.invalid && (telefono?.dirty || telefono?.touched)">
            <span *ngIf="telefono?.errors?.['required']">El teléfono es requerido</span>
            <span *ngIf="telefono?.errors?.['pattern']">Formato inválido. Use: 8888-8888</span>
          </div>
        </div>

        <div class="form-group">
          <label for="email" class="form-label">
            Email <span class="required">*</span>
          </label>
          <input
            id="email"
            type="email"
            formControlName="email"
            class="form-input"
            [class.input-error]="email?.invalid && (email?.dirty || email?.touched)"
            placeholder="correo@ejemplo.com"
          >
          <div class="error-message" *ngIf="email?.invalid && (email?.dirty || email?.touched)">
            <span *ngIf="email?.errors?.['required']">El email es requerido</span>
            <span *ngIf="email?.errors?.['email']">Ingrese un email válido</span>
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group full-width">
          <label for="direccion" class="form-label">
            Dirección <span class="required">*</span>
          </label>
          <textarea
            id="direccion"
            formControlName="direccion"
            class="form-textarea"
            [class.input-error]="direccion?.invalid && (direccion?.dirty || direccion?.touched)"
            placeholder="Ingrese la dirección completa"
            rows="3"
          ></textarea>
          <div class="error-message" *ngIf="direccion?.invalid && (direccion?.dirty || direccion?.touched)">
            <span *ngIf="direccion?.errors?.['required']">La dirección es requerida</span>
            <span *ngIf="direccion?.errors?.['minlength']">La dirección debe tener al menos 10 caracteres</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Botones de acción -->
    <div class="form-actions">
      <button type="button" class="btn-cancelar" (click)="volver()" [disabled]="cargando">
        Cancelar
      </button>
      <button type="submit" class="btn-guardar" [disabled]="clienteForm.invalid || cargando">
        <span *ngIf="!cargando">{{ esEdicion ? 'Actualizar Cliente' : 'Guardar Cliente' }}</span>
        <span *ngIf="cargando">Guardando...</span>
      </button>
    </div>
  </form>
</div>